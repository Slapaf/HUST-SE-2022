let x=document.getElementById("list_body"),cardContainer=document.querySelector("#cardContainer");function getData(){let e=JSON.parse(document.getElementById("json_object").innerHTML),t=document.getElementById("json_length").innerHTML;for(let l=0;l<t;l++)addmember(e[l].collection_title,e[l].username,e[l].collection_status,e[l].collection_id,e[l].submit_count,e[l].deadline)}function addmember(e,t,l,i,d,a){let c=document.createElement("div"),o=document.createElement("div"),r=document.createElement("div"),p=document.createElement("div"),m=document.createElement("div"),s=document.createElement("div"),y=document.createElement("div"),h=document.createElement("div"),u=document.createElement("div"),g=document.createElement("div"),E=document.createElement("div"),C=document.createElement("div"),B=document.createElement("div");x.appendChild(c),c.appendChild(h),c.appendChild(o),c.appendChild(r),c.appendChild(p),c.appendChild(m),c.appendChild(s),c.appendChild(y),y.appendChild(u),y.appendChild(g),y.appendChild(E),y.appendChild(C),y.appendChild(B),o.title=e,r.title=t,p.title=l,m.title=d+"份",s.title=a,h.title=i,o.appendChild(document.createTextNode(o.title)),r.appendChild(document.createTextNode(r.title)),p.appendChild(document.createTextNode(p.title)),m.appendChild(document.createTextNode(m.title)),s.appendChild(document.createTextNode(s.title)),u.appendChild(document.createTextNode("分享")),g.appendChild(document.createTextNode("统计")),C.appendChild(document.createTextNode("复制")),"进行中"==p.title?(E.appendChild(document.createTextNode("编辑")),B.appendChild(document.createTextNode("停止")),p.style.color="green"):(E.appendChild(document.createTextNode("重启")),B.appendChild(document.createTextNode("删除")),o.style.color="gray",r.style.color="gray",p.style.color="gray",m.style.color="gray",s.style.color="gray"),c.className="list_member",o.className="member_title",r.className="member_name",p.className="member_condition",m.className="member_times",s.className="member_date",y.className="member_operate",u.className="operate",g.className="operate",E.className="operate",C.className="operate",B.className="operate",h.style.display="none";let v=c,I=v.querySelector(".member_title"),b=v.querySelector(".member_name"),T=v.querySelector(".member_condition"),N=v.querySelector(".member_times"),f=v.querySelector(".member_date"),$=v.querySelector(".member_operate"),L=document.createElement("div"),k=document.createElement("div"),_=document.createElement("div"),H=document.createElement("div"),M=document.createElement("div"),S=document.createElement("div"),q=document.createElement("div"),D=document.createElement("div"),j=document.createElement("div"),w=document.createElement("div"),O=document.createElement("div"),F=document.createElement("div"),Y=document.createElement("div"),z=document.createElement("div"),A=document.createElement("div");cardContainer.appendChild(L),L.appendChild(k),L.appendChild(_),k.appendChild(H),k.appendChild(M),k.appendChild(D),_.appendChild(S),_.appendChild(q),_.appendChild(j),H.appendChild(w),H.appendChild(I),M.appendChild(O),M.appendChild(b),D.appendChild(z),D.appendChild(f),S.appendChild(F),S.appendChild(T),q.appendChild(Y),q.appendChild(N),j.appendChild($),w.appendChild(document.createTextNode("收集标题:")),O.appendChild(document.createTextNode("收集者:")),z.appendChild(document.createTextNode("截止时间:")),F.appendChild(document.createTextNode("收集状态:")),Y.appendChild(document.createTextNode("提交次数:")),A.appendChild(document.createTextNode("操作")),L.className="card",k.className="cardHead",_.className="cardBody",H.classList="cardItems cardTitleBox",M.classList="cardItems cardNameBox",D.classList="cardItems cardDateBox",S.classList="cardItems cardConditionBox",q.classList="cardItems cardTimesBox",j.classList="cardItems cardOperateBox",w.classList="itemTitles cardTitle",O.classList="itemTitles cardName",z.classList="itemTitles cardDate",F.classList="itemTitles cardCondition",Y.classList="itemTitles cardTimes",A.classList="itemTitles cardOperate",o.onclick=function(){//!此处需添加参数，跳转对应收集详情界面
document.getElementById("hidden-input").value="collect-details$"+h.title,document.getElementById("hidden").submit(),window.location.href="collection_details/"+encryption(h.title)},r.onclick=function(){//!此处需添加参数，跳转对应收集详情界面
document.getElementById("hidden-input").value="collect-details$"+h.title,document.getElementById("hidden").submit(),window.location.href="collection_details/"+encryption(h.title)},p.onclick=function(){//!此处需添加参数，跳转对应收集详情界面
document.getElementById("hidden-input").value="collect-details$"+h.title,document.getElementById("hidden").submit(),window.location.href="collection_details/"+encryption(h.title)},m.onclick=function(){//!此处需添加参数，跳转对应收集详情界面
document.getElementById("hidden-input").value="collect-details$"+h.title,document.getElementById("hidden").submit(),window.location.href="collection_details/"+encryption(h.title)},s.onclick=function(){//!此处需添加参数，
document.getElementById("hidden-input").value="collect-details$"+h.title,document.getElementById("hidden").submit(),window.location.href="collection_details/"+encryption(h.title)},u.onclick=function(){let e=document.getElementById("box");document.getElementById("link").innerText="127.0.0.1:5000/file_submitting/submit"+encryption(h.title),document.getElementById("link").title="127.0.0.1:5000/file_submitting/submit"+encryption(h.title);let t=document.getElementById("popLayer");t.style.width="100%",t.style.height="100%",t.style.display="block",e.style.display="block",console.log(h.title),console.log(encryption(h.title))},g.onclick=function(){//!此处需添加参数，跳转对应收集详情界面
document.getElementById("hidden-input").value="collect-details$"+h.title,document.getElementById("hidden").submit(),window.location.href="collection_details/"+encryption(h.title)},E.onclick=function(){"进行中"==p.title?(document.getElementById("hidden-input").value="edit$"+h.title,document.getElementById("hidden").submit(),window.location.href="file_editing/"+encryption(h.title)):(document.getElementById("hidden-input").value="restart$"+h.title,document.getElementById("hidden").submit(),window.location.href="file_editing/"+encryption(h.title))},C.onclick=function(){//!此处需添加参数，跳转对应收集详情界面
document.getElementById("hidden-input").value="copy$"+h.title,document.getElementById("hidden").submit(),window.location.href="file_collecting/"+encryption(h.title)},B.onclick=function(){if(console.log("检测到点击"),console.log(x),"进行中"==p.title){let e=new Date,t=e.getFullYear(),l=e.getMonth()+1;l<10&&(l="0"+l);let i=e.getDate();i<10&&(i="0"+i);let d=e.getHours();d<10&&(d="0"+d);let a=e.getMinutes();a<10&&(a="0"+a);let y=e.getSeconds();y<10&&(y="0"+y);let u=t+"-"+l+"-"+i+" "+d+":"+a+":"+y;E.innerHTML="重启",B.innerHTML="删除",o.style.color="gray",r.style.color="gray",p.style.color="gray",m.style.color="gray",s.style.color="gray",p.title="已截止",p.innerHTML="已截止",s.innerHTML=u,console.log("点击了停止"),console.log(x),document.getElementById("hidden-input").value="stop$"+encryption(h.title)+"$"+u,document.getElementById("hidden").submit()}else console.log("点击了删除"),console.log(x),console.log(c),document.getElementById("hidden-input").value="del$"+encryption(h.title),cardContainer.removeChild(L),document.getElementById("hidden").submit()}}let n=document.getElementById("link");n.title=document.getElementById("link").innerText;let copy=document.querySelector(".copy");function mycopy(){var e=document.getElementById("link").innerText,t=document.getElementById("input");t.textContent=e,t.select(),document.execCommand("copy"),copy.innerHTML="已复制",setTimeout(()=>{copy.innerHTML="复制"},1500)}function closebox(){document.getElementById("box").style.display="none";document.getElementById("popLayer").style.display="none"}function encryption(e){return window.btoa(encodeURIComponent(e))}function decryption(e){return decodeURIComponent(window.atob(e))}window.onload=getData;